/*
This is an optimized version of Dojo, built for deployment and not for
development. To get sources and documentation, please visit:
http://dojotoolkit.org
*/
window[esri._dojoScopeName||"dojo"]._xdResourceLoaded(function(_1,_2,_3){return {depends:[["provide","esri.layers.osm"],["provide","dojo.io.iframe"],["provide","esri.layers.FeatureLayer"],["provide","esri.layers.MapImageLayer"],["provide","esri.PopupBase"],["provide","dojox.charting.scaler.common"],["provide","dojox.charting.scaler.linear"],["provide","dojox.charting.axis2d.common"],["provide","dojox.charting.Element"],["provide","dojox.charting.axis2d.Base"],["provide","dojox.lang.functional.lambda"],["provide","dojox.lang.functional.array"],["provide","dojox.lang.functional.object"],["provide","dojox.lang.functional"],["provide","dojox.lang.utils"],["provide","dojox.charting.axis2d.Invisible"],["provide","dojo.colors"],["provide","dojox.charting.axis2d.Default"],["provide","dojox.charting.plot2d.common"],["provide","dojox.charting.scaler.primitive"],["provide","dojox.charting.plot2d._PlotEvents"],["provide","dojox.charting.plot2d.Base"],["provide","dojox.lang.functional.reversed"],["provide","dojox.gfx.fx"],["provide","dojox.charting.plot2d.Default"],["provide","dojox.charting.plot2d.Lines"],["provide","dojox.charting.plot2d.Areas"],["provide","dojox.charting.plot2d.Markers"],["provide","dojox.charting.plot2d.MarkersOnly"],["provide","dojox.gfx.gradutils"],["provide","dojox.charting.plot2d.Scatter"],["provide","dojox.lang.functional.sequence"],["provide","dojox.charting.plot2d.Stacked"],["provide","dojox.charting.plot2d.StackedLines"],["provide","dojox.charting.plot2d.StackedAreas"],["provide","dojox.charting.plot2d.Columns"],["provide","dojox.charting.plot2d.StackedColumns"],["provide","dojox.charting.plot2d.ClusteredColumns"],["provide","dojox.charting.plot2d.Bars"],["provide","dojox.charting.plot2d.StackedBars"],["provide","dojox.charting.plot2d.ClusteredBars"],["provide","dojox.charting.plot2d.Grid"],["provide","dojox.charting.plot2d.Pie"],["provide","dojox.charting.plot2d.Bubble"],["provide","dojox.charting.plot2d.Candlesticks"],["provide","dojox.charting.plot2d.OHLC"],["provide","dojo.fx.easing"],["provide","dojox.charting.plot2d.Spider"],["provide","dojox.lang.functional.fold"],["provide","dojox.color._base"],["provide","dojox.color"],["provide","dojox.color.Palette"],["provide","dojox.charting.Theme"],["provide","dojox.charting.Series"],["provide","dojox.charting.Chart"],["provide","dojox.charting.Chart2D"],["provide","dojox.charting.themes.PlotKit.base"],["provide","dijit.Tooltip"],["provide","dojox.charting.action2d.Base"],["provide","dojox.lang.functional.scan"],["provide","dojox.charting.action2d.Tooltip"],["provide","esri.dijit.Popup"],["provide","esri.layers.KMLLayer"],["provide","esri.layers.wms"],["provide","dojo.DeferredList"],["provide","dojo.data.util.filter"],["provide","dojo.data.util.sorter"],["provide","dojo.data.util.simpleFetch"],["provide","dojox.data.CsvStore"],["provide","esri.arcgis.csv"],["provide","esri.arcgis.utils"]],defineResource:function(_4,_5,_6){if(!_4._hasResource["esri.layers.osm"]){_4._hasResource["esri.layers.osm"]=true;_4.provide("esri.layers.osm");_4.declare("esri.layers.OpenStreetMapLayer",esri.layers.TiledMapServiceLayer,{constructor:function(_7){this.spatialReference=new esri.SpatialReference({wkid:102100});this.tileInfo=new esri.layers.TileInfo({rows:256,cols:256,dpi:96,format:"PNG8",compressionQuality:0,origin:{x:-20037508.342787,y:20037508.342787},spatialReference:{wkid:102100},lods:[{level:0,scale:591657527.591555,resolution:156543.033928},{level:1,scale:295828763.795777,resolution:78271.5169639999},{level:2,scale:147914381.897889,resolution:39135.7584820001},{level:3,scale:73957190.948944,resolution:19567.8792409999},{level:4,scale:36978595.474472,resolution:9783.93962049996},{level:5,scale:18489297.737236,resolution:4891.96981024998},{level:6,scale:9244648.868618,resolution:2445.98490512499},{level:7,scale:4622324.434309,resolution:1222.99245256249},{level:8,scale:2311162.217155,resolution:611.49622628138},{level:9,scale:1155581.108577,resolution:305.748113140558},{level:10,scale:577790.554289,resolution:152.874056570411},{level:11,scale:288895.277144,resolution:76.4370282850732},{level:12,scale:144447.638572,resolution:38.2185141425366},{level:13,scale:72223.819286,resolution:19.1092570712683},{level:14,scale:36111.909643,resolution:9.55462853563415},{level:15,scale:18055.954822,resolution:4.77731426794937},{level:16,scale:9027.977411,resolution:2.38865713397468},{level:17,scale:4513.988705,resolution:1.19432856685505},{level:18,scale:2256.994353,resolution:0.597164283559817}]});this.fullExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.initialExtent=new esri.geometry.Extent({xmin:-20037508.34,ymin:-20037508.34,xmax:20037508.34,ymax:20037508.34,spatialReference:{wkid:102100}});this.tileServers=(_7&&_7.tileServers)||["http://a.tile.openstreetmap.org/","http://b.tile.openstreetmap.org/","http://c.tile.openstreetmap.org/"];this.serversLength=this.tileServers.lengt...){_8a3.__popups=_8a7;_8a3.__popupIds=ids;_8a3.__resourceInfo=_8a4.resourceInfo;}}};EAU._onLayersAddResult=function(_8aa){_4.forEach(_8aa,function(_8ab){var _8ac=_8ab.layer;if(_8ac.toJson){var json=_8ac.toJson();if(json.featureSet&&_8ac.name.indexOf("Text")>-1){_4.forEach(json.featureSet.features,function(_8ad,idx){if(_8ad.attributes.TEXT){var _8ae=_8ac.graphics[idx];_8ae.symbol.setText(_8ad.attributes.TEXT);if(_8ad.symbol.horizontalAlignment){_8ae.symbol.align=_8ad.symbol.horizontalAlignment;}_8ae.setSymbol(_8ae.symbol);_8ae.setAttributes(_8ad.attributes);}},this);}}});};EAU._sameSpatialReferenceAsBasemap=function(_8af,_8b0){var _8b1=[102113,102100,3857];var sp1=_8b0[0].layerObject.fullExtent.spatialReference;var sp2=new esri.SpatialReference(_8af.resourceInfo.fullExtent.spatialReference);if(_4.toJson(sp1.toJson())===_4.toJson(sp2.toJson())){return true;}else{if(_4.some(_8b1,function(wkid){return wkid===sp2.wkid;})&&_4.some(_8b1,function(wkid){return wkid===sp1.wkid;})){return true;}}return false;};EAU._sameTilingSchemeAsBasemap=function(_8b2,_8b3){if(!_8b3[0].layerObject.tileInfo){return false;}var _8b4=[];_4.forEach(_8b3,function(_8b5){if(_8b5.baseMapLayer){if(_8b5.layerObject.tileInfo){_8b4=_8b4.concat(_4.map(_8b5.layerObject.tileInfo.lods,function(lod){return lod.scale;}));}}});var _8b6=_4.some(_8b2.resourceInfo.tileInfo.lods,function(lod){return _4.some(_8b4,function(_8b7){return _8b7===lod.scale;});});return _8b6;};EAU._showPopup=function(evt){var map=this,_8b8=map.infoWindow,_8b9=evt.graphic;if(!map.loaded){return;}_8b8.hide();_8b8.clearFeatures();var _8ba=[];_4.forEach(map.graphicsLayerIds,function(_8bb){var _8bc=map.getLayer(_8bb);if(_8bc&&_8bc.declaredClass.indexOf("FeatureLayer")!==-1&&_8bc.loaded&&_8bc.visible){_8bc.clearSelection();if(_8bc.infoTemplate&&!_8bc._suspended){_8ba.push(_8bc);}}});_8b9=(_8b9&&_8b9._getEffInfoTemplate())?_8b9:null;if(!_8ba.length&&!_8b9){return;}var _8bd=EAU._calculateClickTolerance(_8ba);var _8be=evt.screenPoint,_8bf=map.toMap(new esri.geometry.Point(_8be.x-_8bd,_8be.y+_8bd)),_8c0=map.toMap(new esri.geometry.Point(_8be.x+_8bd,_8be.y-_8bd)),_8c1=new esri.geometry.Extent(_8bf.x,_8bf.y,_8c0.x,_8c0.y,map.spatialReference);var _8c2=new esri.tasks.Query();_8c2.geometry=_8c1;_8c2.timeExtent=map.timeExtent;var _8c3=_4.map(_8ba,function(_8c4){var dfd=_8c4.selectFeatures(_8c2);dfd.addCallback(function(){var _8c5=_8c4.getSelectedFeatures();return _8c5;});return dfd;});if(_8b9){var dfd=new _4.Deferred();dfd.callback([_8b9]);_8c3.splice(0,0,dfd);}var _8c6=_4.some(_8c3,function(dfd){return dfd.fired===-1;});if(!_8c6){var _8c7=_8b9?1:0;_4.forEach(_8ba,function(_8c8){_8c7=_8c7+_8c8.getSelectedFeatures().length;});if(!_8c7){return;}}_8b8.setFeatures(_8c3);_8b8.show(evt.mapPoint);};EAU._calculateClickTolerance=function(_8c9){var _8ca=6;_4.forEach(_8c9,function(_8cb){var _8cc=_8cb.renderer;if(_8cc.declaredClass==="esri.renderer.SimpleRenderer"){var _8cd=_8cc.symbol;if(_8cd&&_8cd.xoffset){_8ca=Math.max(_8ca,Math.abs(_8cd.xoffset));}if(_8cd&&_8cd.yoffset){_8ca=Math.max(_8ca,Math.abs(_8cd.yoffset));}}else{if(_8cc.declaredClass==="esri.renderer.UniqueValueRenderer"||_8cc.declaredClass==="esri.renderer.ClassBreaksRenderer"){_4.forEach(_8cc.infos,function(info){var _8ce=info.symbol;if(_8ce&&_8ce.xoffset){_8ca=Math.max(_8ca,Math.abs(_8ce.xoffset));}if(_8ce&&_8ce.yoffset){_8ca=Math.max(_8ca,Math.abs(_8ce.yoffset));}});}}});return _8ca;};EAU._getVisibleFeatureLayers=function(_8cf,_8d0){if(!_8cf||!_8d0||_8d0.length===0){return [];}var _8d1=","+_8d0+",";var _8d2=[];var _8d3="";var k,_8d4=",";for(k=0;k<_8cf.length;k++){if(_8cf[k].subLayerIds!==null){if(_8d1.indexOf(","+_8cf[k].id+",")===-1||_8d4.indexOf(","+_8cf[k].id+",")>-1){_8d4+=_8cf[k].subLayerIds.toString()+",";}}else{if(_8d1.indexOf(","+_8cf[k].id+",")>-1&&_8d4.indexOf(","+_8cf[k].id+",")===-1){_8d2.push(_8cf[k].id);_8d3=",";}}}return _8d2;};EAU._updateLayerScaleInfo=function(_8d5,_8d6){if(_8d6.version<=10.1&&_8d5){var i,id=parseInt(_8d6.url.substring(_8d6.url.lastIndexOf("/")+1,_8d6.url.length));for(i=_8d5.length-1;i>=0;i--){if(_8d5[i].id==id){if(_8d6.minScale==0&&_8d5[i].minScale>0){_8d6.minScale=_8d5[i].minScale;}else{if(_8d6.minScale>0&&_8d5[i].minScale==0){_8d6.minScale=_8d6.minScale;}else{if(_8d6.minScale>0&&_8d5[i].minScale>0){_8d6.minScale=Math.min(_8d6.minScale,_8d5[i].minScale);}}}_8d6.maxScale=Math.max(_8d6.maxScale||0,_8d5[i].maxScale||0);if(_8d5[i].parentLayerId>-1){id=_8d5[i].parentLayerId;}else{break;}}}}};EAU._checkUrl=function(url){if(location.protocol==="https:"&&(EAU._isHostedService(url)||EAU._isAgolService(url))){url=url.replace("http:","https:");}return url;};EAU._isHostedService=function(url){if(!url){return false;}var _8d7=".arcgis.com/";var _8d8=(new _4._Url(EAU.arcgisUrl)).authority;return (url.indexOf(_8d7)!==-1||url.indexOf(_8d8)!==-1);};EAU._isAgolService=function(url){if(!url){return false;}return (url.indexOf("/services.arcgisonline.com/")!==-1||url.indexOf("/server.arcgisonline.com/")!==-1);};}());}}};});
